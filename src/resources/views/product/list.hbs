<section class="row">
  <div class="col-lg-2 col-md-3 content-left pr-0">
    {{> navmanage }}
  </div>

  <script>
    function deleteConfirm() {
      if (confirm("Are you sure to delete!")) {
        return true;
      } else {
        return false;
      }
    }
  </script>

  <div class="col-lg-10 col-md-9 col-12">
    <div class="pt-2 mb-2">
      <h1 class="text-center">Product List</h1>
      {{#if error }}
      <div class="alert alert-danger text-center my-1">{{ error }}</div>
      {{/if}}
      <div class="text-center mb-2 row">
        <div class="col-6 d-flex justify-content-start align-items-center">
          <a href="product/add" class="btn btn-outline-info"><i class="bi bi-plus-circle"></i> Add</a>
        </div>
        <div class="col-6 d-flex justify-content-end align-items-center">
          <form action="/manage/product" method="GET" class="d-flex input-group w-auto">
            <input name="search" type="search" class="form-control" placeholder="Search by name" aria-label="Search"
              aria-describedby="search-addon" />
            <button class="btn btn-secondary searching" type="submit"><i class="bi bi-search"></i></button>
          </form>
        </div>
      </div>
      <table id="tableproduct" class="table table-striped table-bordered m-0" cellspacing="0" width="100%">
        <thead
          class="justify-content-md-between justify-content-sm-center align-content-center border-bottom border-2 my-2 bg-dark text-light p-3 rounded-3">
          <tr class="text-center">
            <th>
              <strong>ID</strong>
            </th>
            <th>
              <strong>Product Name</strong>
            </th>
            <th>
              <strong>Price</strong>
            </th>
            <th>
              <strong>Gender</strong>
            </th>
            <th>
              <strong>Age</strong>
            </th>
            <th>
              <strong>Quantity</strong>
            </th>
            <th>
              <strong>Image</strong>
            </th>
            <th>
              <strong>Category</strong>
            </th>
            <th>
              <strong>Supplier</strong>
            </th>
            <th>
              <strong>Shop</strong>
            </th>
            <th>
              <strong>Edit</strong>
            </th>
            <th>
              <strong>Delete</strong>
            </th>
          </tr>
        </thead>

        <tbody
          class="justify-content-md-between justify-content-sm-center border-bottom border-2 my-2 bg-light p-2 rounded-3">
          {{#if products }}
          {{#each products }}
          <tr>
            <td class="text-center align-middle">
              <a href="/view-detail/{{ this.id }}" style="text-decoration: none;">{{ sum @index 1 }}</a>
            </td>
            <td class="text-center align-middle">{{ this.name }}</td>
            <td class="text-center align-middle">{{ this.price }}</td>
            <td class="text-center align-middle">{{ this.for_gender }}</td>
            {{#ifCond this.for_age '==' 1315}}
            <td class="text-center align-middle">13 - 15</td>
            {{/ifCond}}
            {{#ifCond this.for_age '==' 1619}}
            <td class="text-center align-middle">16 - 19</td>
            {{/ifCond}}
            {{#ifCond this.for_age '==' '1319'}}
            <td class="text-center align-middle">all</td>
            {{/ifCond}}
            <td class="text-center align-middle">{{ this.quantity }}</td>
            <td class="text-center align-middle">
              <a href=""><img src="/products/{{ this.image }}" alt="{{ this.name }}" width="50" height="50" /></a>
            </td>
            <td class="text-center align-middle">{{ this.cat_name }}</td>
            <td class="text-center align-middle">{{ this.sup_name }}</td>
            <td class="text-center align-middle">{{ this.shop_name }}</td>
            <td class="text-center align-middle">
              <a href="/manage/product/show/{{ this.id }}"><i class="bi bi-pen-fill" style="color: black;"></i></a>
            </td>
            <td class="text-center align-middle">
              <form method="POST" action="product/delete/{{ this.id }}?_method=DELETE"
                onsubmit="return deleteConfirm()">
                <button type="submit" style="border: none; cursor: pointer;"><i class="bi bi-trash-fill"
                    style="color: red;"></i></button>
              </form>
              {{!-- <a href="#" class="trash" id=""><i class="bi bi-trash-fill" style="color: red;"></i></a> --}}
            </td>
          </tr>
          {{/each}}
          {{else }}
          <tr>
            <td colspan="12" class="text-center font-weight-bold">Product is empty</td>
          </tr>
          {{/if}}
        </tbody>
      </table>
    </div>
  </div>
</section>